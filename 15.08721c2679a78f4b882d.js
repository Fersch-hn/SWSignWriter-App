(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{"4fRq":function(n,l){var t="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(t){var e=new Uint8Array(16);n.exports=function(){return t(e),e}}else{var u=new Array(16);n.exports=function(){for(var n,l=0;l<16;l++)0==(3&l)&&(n=4294967296*Math.random()),u[l]=n>>>((3&l)<<3)&255;return u}}},EcEN:function(n,l,t){var e=t("xDdU"),u=t("xk4V"),o=u;o.v1=e,o.v4=u,n.exports=o},I2ZF:function(n,l){for(var t=[],e=0;e<256;++e)t[e]=(e+256).toString(16).substr(1);n.exports=function(n,l){var e=l||0;return[t[n[e++]],t[n[e++]],t[n[e++]],t[n[e++]],"-",t[n[e++]],t[n[e++]],"-",t[n[e++]],t[n[e++]],"-",t[n[e++]],t[n[e++]],"-",t[n[e++]],t[n[e++]],t[n[e++]],t[n[e++]],t[n[e++]],t[n[e++]]].join("")}},ksNu:function(n,l,t){"use strict";t.r(l);var e=t("CcnG"),u=t("mrSG"),o=t("bne5"),r=t("67Y/"),i=t("Gi3i"),c=t("ad02"),s=t("ZZ/e"),a=t("ACu4"),b=t("sCZD"),p=t("Q/j7"),f=t("EcEN"),h=t("2/4T"),g=function(){function n(n,l,t,e,u){this.modalController=n,this.normalize=l,this.signsLookupService=t,this.documentService=e,this.router=u}return n.prototype.ngOnInit=function(){this.documentService.clearDocument(),this.showDocument(this.documentService.getDocument())},n.prototype.resetEntries=function(){this.signsLookupService.loadSigns()},n.prototype.ngAfterViewInit=function(){var n=this;Object(o.a)(this.searchRef.nativeElement,"keyup").pipe(Object(r.a)(function(n){return n.target.value}),Object(i.a)(100),Object(c.a)()).subscribe(function(l){var t=n.clean(l),e=n.searchFrase(t);n.updateSigns(e)})},n.prototype.updateSigns=function(n){this.documentService.updateSigns(n),this.showDocument(this.documentService.getDocument())},n.prototype.showDocument=function(n){this.editedDocument={editedsigns:n.signs}},n.prototype.trackFound=function(n,l){return l?l.id:void 0},n.prototype.searchFrase=function(n){var l=this;return this.clean(n).split(" ").filter(function(n){return!(!n||0===n.length)}).map(function(n){return l.findSign(n)})},n.prototype.clean=function(n){var l=n;return[{f:"{",t:""},{f:"}",t:""},{f:"}",t:""},{f:"\\( ",t:""},{f:"\\)",t:""},{f:",",t:" , "},{f:"\\.",t:" . "},{f:"!",t:" ! "},{f:"\xa1",t:" \xa1 "},{f:"\\?",t:" ? "},{f:"\xbf",t:" \xbf "},{f:":",t:" : "},{f:";",t:" ; "},{f:"\t",t:" "},{f:"   ",t:" "},{f:"  ",t:" "}].forEach(function(n){l=l.replace(new RegExp(n.f,"g"),n.t)}),l},n.prototype.findSign=function(n){var l,t=this.signsLookupService.search(n),e=t.length;if(t.length>0){var u=this.findmatchingresult(t,n);l={sign:u.sign,text:n,id:u.sign.key+n,svg:ssw.svg(u.sign.fsw),totalmatches:e,color:this.matchColor(u)}}return l||(l={sign:null,text:n+" sign not found",id:Object(f.v4)()+n,svg:"",totalmatches:e,color:this.matchColor(null)}),l},n.prototype.matchColor=function(n){var l,t={r:0,g:128,b:0},e={r:255,g:255,b:0},u={r:255,g:165,b:0};if(n)switch(n.type){case"exact":l=1===n.count?"green":this.colorgradient(n.count,t,e);break;case"case":l=this.colorgradient(n.count+1,t,e);break;case"similar":l=this.colorgradient(n.count,e,u);break;case"substring":l=this.colorgradient(n.count,u,{r:255,g:0,b:0});break;case"notmatching":default:l="red"}return l},n.prototype.colorgradient=function(n,l,t){var e=n/10;return this.RGB2HTML((l.r-t.r)*e+l.r,(l.g-t.g)*e+l.g,(l.b-t.b)*e+l.b)},n.prototype.RGB2HTML=function(n,l,t){return"#"+(16777216+t+256*l+65536*n).toString(16).substr(1)},n.prototype.findmatchingresult=function(n,l){var t,e=this.normalize.normalizeForSearch(l),u="exact",o=n.filter(function(n){return n.gloss===l}),r=o.length;if(r>0&&(t=o[0]),t)return{type:u,sign:t,count:r};u="case";var i,c=n.filter(function(n){return n.gloss.toLowerCase()===l.toLowerCase()}),s=c.length;if(s>0&&(i=c[0]),i)return{type:u,sign:i,count:s};u="similar";var a,b=n.filter(function(n){return n.normalized===e}),p=o.length;if(p>0&&(a=b[0]),a)return{type:u,sign:a,count:p};u="substring";var f,h=n.filter(function(n){return n.normalized.includes(e)}),g=o.length;return g>0&&(f=h[0]),f?{type:u,sign:f,count:g}:{type:u="notmatching",sign:n[0],count:0}},n.prototype.replace=function(n){return u.b(this,void 0,void 0,function(){var l,t,e,o;return u.e(this,function(u){switch(u.label){case 0:return l=this.documentService.getDocument(),[4,this.modalController.create({component:a.a,componentProps:{searchword:l.signs[n].text}})];case 1:return[4,(t=u.sent()).present()];case 2:return e=u.sent(),[4,t.onDidDismiss()];case 3:return o=u.sent().data,console.log(o),l.signs=this.replaceElement(this.documentService.getDocument().signs,n,o),this.documentService.updateDocument(l),this.showDocument(this.documentService.getDocument()),[2,e]}})})},n.prototype.replaceElement=function(n,l,t){var e=n[l],u=this.signsLookupService.getsign(t.result);if(e&&u){var o=n.indexOf(e);o>=0&&(n[o]={sign:u,text:u.gloss,id:u.key+u.gloss,svg:ssw.svg(u.fsw)})}return n},n.prototype.accept=function(){return this.router.navigateByUrl("/view")},n}(),d=function(){return function(){}}(),m=t("pMnS"),v=t("oBZk"),k=t("Ip0R"),y=t("ZJwn"),x=t("ZYjt"),w=t("gIcY"),C=t("ZYCi"),S=e.nb({encapsulation:0,styles:[[".sign[_ngcontent-%COMP%]{min-width:100px;padding:0}.editbutton[_ngcontent-%COMP%]{margin:5px;padding:10px 10px 0}"]],data:{}});function E(n){return e.Ib(0,[(n()(),e.pb(0,0,null,null,2,"ion-badge",[["color","light"]],null,null,null,v.B,v.b)),e.ob(1,49152,null,0,s.g,[e.h,e.k],{color:[0,"color"]},null),(n()(),e.Gb(2,0,["",""]))],function(n,l){n(l,1,0,"light")},function(n,l){n(l,2,0,l.parent.context.$implicit.totalmatches)})}function D(n){return e.Ib(0,[(n()(),e.pb(0,0,null,null,18,"ion-item",[],null,null,null,v.M,v.m)),e.ob(1,49152,null,0,s.E,[e.h,e.k],null,null),(n()(),e.pb(2,0,null,0,16,"button",[["class","editbutton"],["type","button"]],[[4,"background-color",null]],[[null,"click"]],function(n,l,t){var e=!0;return"click"===l&&(e=!1!==n.component.replace(n.context.index)&&e),e},null,null)),(n()(),e.pb(3,0,null,null,15,"div",[["class","sign"]],null,null,null,null,null)),(n()(),e.pb(4,0,null,null,1,"span",[],[[8,"innerHTML",1]],null,null,null,null)),e.Cb(5,1),(n()(),e.pb(6,0,null,null,12,"ion-grid",[],null,null,null,v.J,v.j)),e.ob(7,49152,null,0,s.x,[e.h,e.k],null,null),(n()(),e.pb(8,0,null,0,10,"ion-row",[],null,null,null,v.V,v.v)),e.ob(9,49152,null,0,s.fb,[e.h,e.k],null,null),(n()(),e.pb(10,0,null,0,4,"ion-col",[["size","10"]],null,null,null,v.E,v.e)),e.ob(11,49152,null,0,s.q,[e.h,e.k],{size:[0,"size"]},null),(n()(),e.pb(12,0,null,0,2,"ion-label",[],null,null,null,v.N,v.n)),e.ob(13,49152,null,0,s.K,[e.h,e.k],null,null),(n()(),e.Gb(14,0,[""," "])),(n()(),e.pb(15,0,null,0,3,"ion-col",[["size","1"]],null,null,null,v.E,v.e)),e.ob(16,49152,null,0,s.q,[e.h,e.k],{size:[0,"size"]},null),(n()(),e.gb(16777216,null,0,1,null,E)),e.ob(18,16384,null,0,k.i,[e.O,e.L],{ngIf:[0,"ngIf"]},null)],function(n,l){n(l,11,0,"10"),n(l,16,0,"1"),n(l,18,0,l.context.$implicit.totalmatches>1)},function(n,l){n(l,2,0,l.context.$implicit.color);var t=e.Hb(l,4,0,n(l,5,0,e.zb(l.parent,0),l.context.$implicit.svg));n(l,4,0,t),n(l,14,0,l.context.$implicit.text)})}function z(n){return e.Ib(0,[e.Bb(0,y.a,[x.b]),e.Eb(402653184,1,{searchRef:0}),(n()(),e.pb(2,0,null,null,19,"ion-header",[],null,null,null,v.K,v.k)),e.ob(3,49152,null,0,s.y,[e.h,e.k],null,null),(n()(),e.pb(4,0,null,0,8,"ion-toolbar",[],null,null,null,v.Z,v.z)),e.ob(5,49152,null,0,s.yb,[e.h,e.k],null,null),(n()(),e.pb(6,0,null,0,3,"ion-buttons",[["slot","start"]],null,null,null,v.D,v.d)),e.ob(7,49152,null,0,s.i,[e.h,e.k],null,null),(n()(),e.pb(8,0,null,0,1,"ion-menu-button",[],null,null,null,v.P,v.q)),e.ob(9,49152,null,0,s.O,[e.h,e.k],null,null),(n()(),e.pb(10,0,null,0,2,"ion-title",[],null,null,null,v.Y,v.y)),e.ob(11,49152,null,0,s.wb,[e.h,e.k],null,null),(n()(),e.Gb(-1,0,["Edit"])),(n()(),e.pb(13,0,null,0,8,"ion-item",[],null,null,null,v.M,v.m)),e.ob(14,49152,null,0,s.E,[e.h,e.k],null,null),(n()(),e.pb(15,0,[[1,0]],0,3,"ion-textarea",[["placeholder","Enter words to search here..."]],null,[[null,"ionBlur"],[null,"ionChange"]],function(n,l,t){var u=!0;return"ionBlur"===l&&(u=!1!==e.zb(n,18)._handleBlurEvent()&&u),"ionChange"===l&&(u=!1!==e.zb(n,18)._handleInputEvent(t.target.value)&&u),u},v.X,v.x)),e.Db(5120,null,w.b,function(n){return[n]},[s.Jb]),e.ob(17,49152,[["searchRef",4]],0,s.ub,[e.h,e.k],{placeholder:[0,"placeholder"]},null),e.ob(18,16384,null,0,s.Jb,[e.k],null,null),(n()(),e.pb(19,0,null,0,2,"ion-button",[["style","display:none"]],null,[[null,"click"]],function(n,l,t){var e=!0;return"click"===l&&(e=!1!==n.component.resetEntries()&&e),e},v.C,v.c)),e.ob(20,49152,null,0,s.h,[e.h,e.k],null,null),(n()(),e.Gb(-1,0,["Reset"])),(n()(),e.pb(22,0,null,null,11,"ion-content",[["padding",""]],null,null,null,v.F,v.f)),e.ob(23,49152,null,0,s.r,[e.h,e.k],null,null),(n()(),e.pb(24,0,null,0,3,"ion-list",[],null,null,null,v.O,v.o)),e.ob(25,49152,null,0,s.L,[e.h,e.k],null,null),(n()(),e.gb(16777216,null,0,1,null,D)),e.ob(27,278528,null,0,k.h,[e.O,e.L,e.s],{ngForOf:[0,"ngForOf"],ngForTrackBy:[1,"ngForTrackBy"]},null),(n()(),e.pb(28,0,null,0,5,"ion-fab",[["horizontal","end"],["slot","fixed"],["vertical","bottom"]],null,null,null,v.H,v.g)),e.ob(29,49152,null,0,s.t,[e.h,e.k],{horizontal:[0,"horizontal"],vertical:[1,"vertical"]},null),(n()(),e.pb(30,0,null,0,3,"ion-fab-button",[],null,null,null,v.G,v.h)),e.ob(31,49152,null,0,s.u,[e.h,e.k],null,null),(n()(),e.pb(32,0,null,0,1,"ion-icon",[["name","checkmark"]],null,[[null,"click"]],function(n,l,t){var e=!0;return"click"===l&&(e=!1!==n.component.accept()&&e),e},v.L,v.l)),e.ob(33,49152,null,0,s.z,[e.h,e.k],{name:[0,"name"]},null)],function(n,l){var t=l.component;n(l,17,0,"Enter words to search here..."),n(l,27,0,t.editedDocument.editedsigns,t.trackFound),n(l,29,0,"end","bottom"),n(l,33,0,"checkmark")},null)}function F(n){return e.Ib(0,[(n()(),e.pb(0,0,null,null,1,"app-edit",[],null,null,null,z,S)),e.ob(1,4308992,null,0,g,[s.Cb,b.a,p.a,h.a,C.n],null,null)],function(n,l){n(l,1,0)},null)}var O=e.lb("app-edit",g,F,{},{},[]),R=t("iTUp");t.d(l,"EditPageModuleNgFactory",function(){return j});var j=e.mb(d,[],function(n){return e.wb([e.xb(512,e.j,e.bb,[[8,[m.a,O]],[3,e.j],e.x]),e.xb(4608,k.k,k.j,[e.u,[2,k.r]]),e.xb(4608,w.d,w.d,[]),e.xb(4608,s.a,s.a,[e.z,e.g]),e.xb(4608,s.Cb,s.Cb,[s.a,e.j,e.q,k.c]),e.xb(4608,s.Fb,s.Fb,[s.a,e.j,e.q,k.c]),e.xb(1073742336,k.b,k.b,[]),e.xb(1073742336,w.c,w.c,[]),e.xb(1073742336,w.a,w.a,[]),e.xb(1073742336,s.Ab,s.Ab,[]),e.xb(1073742336,C.p,C.p,[[2,C.v],[2,C.n]]),e.xb(1073742336,R.a,R.a,[]),e.xb(1073742336,d,d,[]),e.xb(1024,C.l,function(){return[[{path:"",component:g}]]},[])])})},xDdU:function(n,l,t){var e,u,o=t("4fRq"),r=t("I2ZF"),i=0,c=0;n.exports=function(n,l,t){var s=l&&t||0,a=l||[],b=(n=n||{}).node||e,p=void 0!==n.clockseq?n.clockseq:u;if(null==b||null==p){var f=o();null==b&&(b=e=[1|f[0],f[1],f[2],f[3],f[4],f[5]]),null==p&&(p=u=16383&(f[6]<<8|f[7]))}var h=void 0!==n.msecs?n.msecs:(new Date).getTime(),g=void 0!==n.nsecs?n.nsecs:c+1,d=h-i+(g-c)/1e4;if(d<0&&void 0===n.clockseq&&(p=p+1&16383),(d<0||h>i)&&void 0===n.nsecs&&(g=0),g>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");i=h,c=g,u=p;var m=(1e4*(268435455&(h+=122192928e5))+g)%4294967296;a[s++]=m>>>24&255,a[s++]=m>>>16&255,a[s++]=m>>>8&255,a[s++]=255&m;var v=h/4294967296*1e4&268435455;a[s++]=v>>>8&255,a[s++]=255&v,a[s++]=v>>>24&15|16,a[s++]=v>>>16&255,a[s++]=p>>>8|128,a[s++]=255&p;for(var k=0;k<6;++k)a[s+k]=b[k];return l||r(a)}},xk4V:function(n,l,t){var e=t("4fRq"),u=t("I2ZF");n.exports=function(n,l,t){var o=l&&t||0;"string"==typeof n&&(l="binary"===n?new Array(16):null,n=null);var r=(n=n||{}).random||(n.rng||e)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,l)for(var i=0;i<16;++i)l[o+i]=r[i];return l||u(r)}}}]);